<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Kevin's Rock Paper Scissors Game</title>
</head>
<body>
	<script>

		function computerPlay() {

			let threeChoices = ['Rock', 'Paper', 'Scissors'];

			let randomComputerChoice = Math.floor(Math.random()*threeChoices.length);

			let computerChoice = threeChoices[randomComputerChoice];
			return computerChoice;
		}

		function playRound(playerSelection, computerSelection) {

			let playerSelectionLower = playerSelection.toLowerCase();
			let playerFinalChoice = playerSelectionLower.charAt(0).toUpperCase() + playerSelectionLower.slice(1);

			let computerSelectionLower = computerSelection.toLowerCase();

			/* let winnerStatement = "You win! " + playerFinalChoice + " beats " + computerSelection + ".";
			let loserStatement = "You lose! " + computerSelection + " beats " + playerFinalChoice + ".";
			let tieStatement = "Its a tie! The choice for each was " + computerSelection + "."; */

			let winnerStatement = "Player Wins!";
			let loserStatement = "Computer Wins!";
			let tieStatement = "Its a Tie!";


			if (playerSelectionLower == 'rock') {
				if (computerSelectionLower == 'scissors') {
					return winnerStatement;
				} else if (computerSelectionLower == 'rock') {
					return tieStatement;
				} else {
					return loserStatement;
				}
			} else if (playerSelectionLower == 'paper') {
				if (computerSelectionLower == 'rock') {
					return winnerStatement;
				} else if (computerSelectionLower == 'paper') {
					return tieStatement;
				} else {
					return loserStatement;
				}
			} else if (playerSelectionLower == 'scissors') {
				if (computerSelectionLower == 'paper') {
					return winnerStatement;
				} else if (computerSelectionLower == 'scissors') {
					return tieStatement;
				} else {
					return loserStatement;
				}
			} else {
				return 'Player\'s Selection is not Rock, Paper, or Scissors.';
			}
		}

		function game() {

			const FIVE = 5;
			let gameCount;
			let playerCount = 0, computerCount = 0, tieCount = 0;

			for (gameCount = 0; gameCount < FIVE; gameCount++) { 

				let playerChoice = window.prompt('Choose Rock, Paper, or Scissors!', 'Rock');
				let computerChoice = computerPlay();
				console.log("Player: " + playerChoice + ", Console: " + computerChoice);

				let roundWinner = playRound(playerChoice, computerChoice);
				console.log(roundWinner);

				if (roundWinner == "Player Wins!") { 
					playerCount += 1;
				} else if (roundWinner == "Computer Wins!") {
					computerCount += 1;
				} else if (roundWinner == "Its a Tie!") {
					tieCount += 1;
				} else {
					gameCount = -1, playerCount = 0, computerCount = 0, tieCount = 0;
					console.log('Reset! Invalid Choice!');
				}
			}	

			let finalWinner = gameWinner(playerCount, computerCount, tieCount);

			return finalWinner;
		}

		function gameWinner(playerCount, computerCount, tieCount) {

			let winningScore;

			if (playerCount > computerCount) {
				winningScore = playerCount + " - " + computerCount + " - " + tieCount + "."; 
				return "Over five games, Player defeats Computer by a score of " + winningScore;
			} else if (playerCount == computerCount) {
				winningScore = playerCount + " - " + computerCount + " - " + tieCount + ".";
				return "Over five games, Player and Computer tie by a score of " + winningScore;
			} else {
				winningScore = computerCount + " - " + playerCount + " - " + tieCount + ".";
				return "Over five games, Computer defeats Player by a score of " + winningScore;
			}
		}
	</script>
</body>
</html>
